%
% Chapter: Introduction
%
\chapter{Introduction}
\label{ch:intro}
The following subsections of this chapter discuss the motivation, research objectives and related work of this theses. The goal is to implement a prototype which executes a three-way swap that helps Alice, Bob and Carol to execute their trade and protect them of fraud if one of the parties behaves irrationally. At the current state of the cryptocurrency environment they still need to use a centralized exchange to swap assets between different blockchains. Decentralization of the trading process has the potential to protect users from scams and to remove a single point of failure in the case an exchange gets hacked or steals the funds of their users.

%
% Section: Motivation
%
\section{Motivation}
\label{sec:intro:motivation}
Atomic cross-chain swaps have the potential to remove the intermediate parties such as exchanges in the cryptocurrency environment. By removing centralized exchanges and handling the exchange process with smart contracts and a swap protocol attack vectors which can be used by malicious actors are reduced. Scams and hacks of the exchange are not possible anymore, resulting in increased security for the user who wants to trade crypto assets. Interoperability has the potential to let companies exchange information or assets with hard coded rules they agreed on before to be execute by smart contracts. Since blockchain is a relative new technology that is evolving and changing rapidly achieving interoperability brings difficulties, due to different architectures, consensus algorithms and missing support for turing-complete smart contracts. This theses contains a summary of related work on the blockchain interoperability research field and collected knowledge about the different technologies addressing swaps. An implementation of a three-way swap prototype, performance tests and an outlook whats possible in the future by adding more features to the prototype are discussed. An overview over the current state on whole research field addressing blockchain interoperability and a proposal of a reference architecture for universal swaps are also part of this theses. Swaps and blockchain interoperability are an interesting topic since it could protect Alice and Bob ending up worse, if Carol would behave irrationally or tries to scam them. The smart contracts ensures that funds are returned to their owners if the trade is canceled. Several things have been learned from implementing the three-way swap prototype. Through modifications and by adding more features it could execute any kind of swap from 2 $\dots$ $n$ actors with 2 $\dots$ $n$ blockchains. In the case of the ethereum blockchain, its available clients and libraries more work is needed to improve visiblity for the user, since internal transactions by a smart contract do not show up on the balance of an account. Also blockchain interoperability can only be achieved by software that supports turing-complete smart contracts.

%
% Section: Ziele
%
\section{Research Objectives}
\label{sec:intro:goal}
This chapter \ref{ch:intro} discusses the motivation and several historic information which led to the research objective covered by this thesis. The next chapter \ref{ch:background} introduces the model and general principles serving as foundation to address the research objective. Followed by chapter \ref{ch:chapter03} which presents a requirement analysis for the three-way swap prototype. In chapter \ref{ch:chapter04} the implementation of atomic cross-chain swaps on Ethereum blockchains is presented to help Alice, Bob and Carol with the trades they want to do. The last chapter \ref{ch:chapter05} discusses a conclusion of this work, to reflect the whole thesis and addresses future research directions. Finally the last chapter \ref{ch:chapter06} presents important terminology, which is crucial to understand the topics mentioned above. This theses aims to collect and summarize the current state of blockchain interoperability. By the implementation of a prototype that executes a three-way swap in order to help Alice, Bob and Carol to execute their trade in a decentralized and atomic way, this work aims to deliver a proof of concept of atomic cross-chain swaps. Possible future research directions are discussed as part of the conclusion at the end of this work. For simplicity three ethereum chains are used instead of bitcoin, alt-coin and a car-title chain. Implementation shows that even with three chains that use similar technology and consensus algorithm, problems arise that suggest further research to fully decentralize intermediate parties like cryptocurrency exchanges.


%This work covers three research objectives in general, which are equally weighted in importance. The chapter \ref{ch:background} presents foundations such as the ethereum blockchain and %smart contracts to build the foundation to understand the implementation of atomic cross-chain swaps. Besides the \ac{EVM} and smart contacts, digraphs are discussed, since they are %crucial to execute a secure swap between two or three blockchains. The second part introduces the implementation of atomic cross-chain swaps between three blockchains (three-way swap) and %proposes the reference architecture and the implementation of the smart contracts in detail. The last part is all about future research and an outlook about current blockchain research to %show the direction and possible outcome of an blockchain ecosystem which we might see in the future. Since there is a vast amount of blockchains with different consensus algorithms and %software architectures there seems to be a need for interoperability between these chains. Some researchers do even propose whole frameworks in order to remove the intermediate party and %swap information, token or assets back and forth between these chains. Ultimately this work provides an implementation of atomic cross-chain swaps between three ethereum blockchains, %enabling end users to trade information, assets or token between three chains without an intermediate party and discuss an overview about current and future blockchain research addressing %interoperability.

%TODO include moore's feedback:
%This is (first) the structure of the thesis, with which you opened this chapter... and at the end sort of describes objectives. As a reader, I still know next to nothig (so far) about your prototype.

%
% Section: Ziele
%
\section{Related Work}
\label{sec:intro:relatedwork}
Decentralization and scaling of blockchains is a widely addressed topic by many researchers. There is a vast amount of cryptocurrencies and technologies out there \cite{coinmarketcap}. Bitcoin \cite{nakamoto2008peer} was the first successful blockchain application which decentralizes money, combining the well-known concepts of \ac{PoW} algorithms and the distributed ledger concept. Based on previous work by Wood \cite{wood2014ethereum}, Buterin described the next-generation smart contract and decentralized application platform known as Ethereum \cite{buterin2013ethereum} \cite{buterin2014ethereum}. After the success of ethereum his research continues towards chain interoperability \cite{buterin2016chain} and addresses the scalability limits of today's blockchains with his work on sharding blockchains \cite{buterin2017sharding}. While most present blockchains still remain unconnected, pegged sidechains are formally defined by \cite{back2014enabling} and is the foundation for many proposals towards blockchain interoperabilty. Originally known as BitMonero, the Monero cryptocurrency was created in April 2014 \cite{alonso2020zero} as a proof-of-concept currency of the CryptoNote \cite{van2013cryptonote} technology. Cryptocurrencies dont just exist with different consensus algortithms and architecures, they also aim to serve a specific purpose. Monero addresses privacy and utilitizes borromean ring signatures \cite{maxwell2015borromean} to implement ring \ac{CT} \cite{noether2016ring} in order to improve untraceability. Cardano uses a research-first driven approach to develop a smart contract platform which seeks to deliver more advanced features than any protocol previously developed. For example the initiators developed their own Ouroboros \ac{PoS} protocol \cite{kiayias2017ouroboros} and proposed a work about \ac{PoS} sidechains \cite{gavzi2019proof}. Cardano also did research on \ac{NIPoPoWs} to increase \ac{PoW} performance and to enable cross \ac{PoW} based blockchain transfers of assets \cite{kiayias2017non} and utilities the results to propose \ac{PoW} sidechains \cite{kiayias2019proof}. There is more work about sidechains and interoperability by Johnson \cite{johnson2019sidechains}, Dagher who puts focus on interoperability security \cite{dagher2017towards} and Robinson's work about ethereum private sidechains \cite{robinson2019atomic}. Herlihy proposed the concept of atomic cross-chain swaps to exchange tokens and assets between blockchains safely \cite{herlihy2018atomic} to enable communication between two blockchains without intermediaries. The concept of two-party atomic cross-chain swaps is believed that it emerged from an online forum discussion, see footnotes for references to bitcoinwiki and bitcointalk threads \cite{atomictrading} \cite{cutandchoose}. There is open source code available on github \cite{hashedtimelocked} \cite{dered} implementing a two-party cross-chain swaps protocol for selected currencies, as well as another proposal for applications using swaps \cite{zyskind2018enigma}. To address the scalability limits of existing blockchains several off-chain payment networks do exist, for further details refer to \cite{raidennetwork} and to \cite{poon2016bitcoin} \cite{decker2015fast} \cite{green2017bolt}. These concepts process multiple transactions off-chain and eventually resolve the final balance through a single on-chain transaction. The Revive network \cite{khalil2017revive} is another actor which uses off-chain transactions in a way to ensure, that participating parties do not end off worse in the process of re-balancing. These algorithms also utilitize the concept of hashed timelock contracts, but they address a different set of problems. Multi-party swaps in example become important, when matching kidney donors and recipients. Think of a case, where a transplant recipient has an incompatible donor and wants to swap donor with another recipient where all parties want to assure, that each recipient obtains a compatible organ. A number of algorithms \cite{abraham2007clearing} \cite{dickerson2016position} \cite{jia2017efficient} have been proposed for matching donors and recipients. Shapley and Scarf \cite{shapley1974cores} write about the circumstances under which a certain kind of swap markets could have strong equilibrium. Kaplan \cite{kaplan2011improved} describes a polynominal-time algorithm, which constructs a swap digraph for a given set of swaps, if one exists. This paper focuses on "the clearing problem" though, which is roughly analogous to constructing a swap digraph, but not on how execute those atomic cross-chain swaps on blockchains. A precursor of atomic cross-chain swaps is the fair exchange problem \cite{franklin1998secure} \cite{micali2003simple}. It tries to find a solution for an asset exchange between parties, which do not trust each other. Since its proven that a fair exchange between two parties can not be guaranteed without a trusted third party \cite{pagnia1999impossibility}, atomic cross-chain swaps could be a successor to the fair exchange problem through new technologies like blockchain and smart contracts. Borkowski proposes \ac{DeXTT} another uptake on blockchain interoperability by formally describing blockchains and token transfers between those, through utilitizing concepts such as claim-first transactions \cite{borkowski2018caught} and determistic witnesses \cite{borkowski2019dextt}. Komodo \cite{barterdex2020} by SuperNETorg is another available atomic swap decentralized exchange of native coins, their BarterDEX system combines three key component like order matching, trade clearing and liquidity provision in a single system. It allows users to make a coin conversion request, find a suitable match and complete the trade using an atomic cross-chain protocol. Despite the fact that blockchain interoperability is addressed by many researches in different ways, these cross-chain technologies fall into three main categories according to Li and Zhang \cite{li2019research}. The main categories of the cross-chain technologies are notary or multiple signature schemes, side chain/relay chain and hash timelock, the principles of these main categories are shown in table \ref{table:1}. \newline

\begin{table}[h!]
	\centering
	\begin{tabular}{|c | c | c |} 
		\hline 
		Cross-chain technology & Algorithmic principle & Shortcoming \\ [0.5ex] 
		\hline \hline
		Notary & Transfer of assets to notary accounts & Weak centralization  \\ 
		\hline
		Side chain & Read the data in the side chain & Verification difficulties  \\
		\hline
		Relay chain & Establishing relay chain & Data redundancy  \\ [1ex] 
		\hline
	\end{tabular}
	\caption{Cross-chain technology comparison}
	\label{table:1}
\end{table}

The notary or multi-signature scheme is a solution with weak centralization. It transfers assets by locking them to multiple accounts on the main-chain and requires signatures from multiple notaries to release the locked funds. Ripple by Interledger protocol \cite{hope2016interledger} transfers assets across different blockchains through trusted third parties. To transfer assets cross-chain, the notary or multi-signature scheme is the simplest way to achieve swaps, but still depends on the honesty of the notaries to ensure none of the participating parties end up worse. The side chain technology transfers digital assets by reading the data from the main chain and verifies the authenticity of the transaction payments. For example the BTC Relay \cite{btcrelay} project implements those cross-chain payments by verifying the bitcoin \ac{SPV} payment path to trigger ethereum smart contracts \cite{buterin2014ethereum}. The relay technology links existing blockchains by building a relay chain to implement cross-chain swaps of assets. Cosmos \cite{kwon2018network} which is based on previous research on the \ac{PBFT} consensus algorithm \cite{castro1999practical} and tendermint \cite{kwon2014tendermint} \cite{buchman2016tendermint} and Polkadot \cite{wood2016polkadot} propose a cross-chain platform compatible with any blockchain, to build such a system they combine the notary and relay technology.



% MB interesting https://arxiv.org/ftp/arxiv/papers/1902/1902.04471.pdf   -> read it, talks about on and off chain impl of swaps!!

% MB ADD  ->plasma \cite{poon2017plasma} z-snarks \cite{garoffolo2020zendoo} 

% MB add subchapter for variety of consensus algorithms and tell why pow needs to be replaced and the different purposes of those algorithms.
% Consensus mechanisms	Proof of authorityProof of spaceProof of stakeProof of work






